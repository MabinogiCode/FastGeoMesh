root = true

[*]
charset = utf-8
end_of_line = lf
insert_final_newline = true
trim_trailing_whitespace = true

[*.{cs,csproj,props,targets}]
indent_style = space
indent_size = 4

[*.md]
trim_trailing_whitespace = false

# ---------------- C# code style & analyzers ----------------
[*.cs]
# Inherit base formatting if root file added later
csharp_prefer_braces = true:error
csharp_style_namespace_declarations = file_scoped:error

# Strengthen some rules for library surface
# Public API should have XML docs
# (Keep as warning to avoid breaking build immediately; can escalate later.)
dotnet_diagnostic.CS1591.severity = warning

# Avoid async void
dotnet_diagnostic.VSTHRD100.severity = warning

# Prefer readonly struct when small
csharp_style_prefer_readonly_struct = true:warning
csharp_style_prefer_readonly_fields = true:warning

# Prevent hidden allocations via implicit object creation (C# 12 OK but keep explicit for clarity now)
dotnet_diagnostic.IDE0090.severity = suggestion

# Potential performance issues
# CA1852: Make sealed types sealed (we intentionally seal already) -> keep suggestion
dotnet_diagnostic.CA1852.severity = suggestion

# Suppress noisy suggestions until review
dotnet_diagnostic.IDE0058.severity = silent
dotnet_diagnostic.IDE0005.severity = error        # remove unnecessary usings
dotnet_diagnostic.IDE0065.severity = error        # using directive placement
dotnet_diagnostic.SA1300.severity = error
dotnet_diagnostic.SA1310.severity = error
csharp_style_namespace_declarations = file_scoped:suggestion
csharp_style_var_for_built_in_types = true:silent
csharp_style_var_when_type_is_apparent = true:silent
csharp_style_var_elsewhere = true:suggestion
csharp_style_prefer_switch_expression = true:suggestion
csharp_style_prefer_pattern_matching = true:suggestion
csharp_style_expression_bodied_methods = when_on_single_line:suggestion
csharp_using_directive_placement = outside_namespace:suggestion

# Symbol group : toutes les méthodes
dotnet_naming_symbols.methods.applicable_kinds = method
dotnet_naming_symbols.methods.applicable_accessibilities = *
dotnet_naming_symbols.methods.required_modifiers = *

# Style : pas d'underscore
dotnet_naming_style.no_underscores.capitalization = pascal_case
dotnet_naming_style.no_underscores.required_prefix = 
dotnet_naming_style.no_underscores.required_suffix = 
dotnet_naming_style.no_underscores.required_modifiers = 

# Règle : méthodes => style sans underscore
dotnet_naming_rule.methods_must_be_pascal_without_underscore.symbols = methods
dotnet_naming_rule.methods_must_be_pascal_without_underscore.style = no_underscores
dotnet_naming_rule.methods_must_be_pascal_without_underscore.severity = error

# Sort usings (System first)
dotnet_sort_system_directives_first = true