root = true

[*]
charset = utf-8
end_of_line = lf
insert_final_newline = true
trim_trailing_whitespace = true

[*.{cs,csproj,props,targets}]
indent_style = space
indent_size = 4

[*.md]
trim_trailing_whitespace = false

# ---------------- C# code style & analyzers ----------------
[*.cs]
# Require braces for all control blocks
csharp_prefer_braces = true:error
# Braces: opening brace on new line for control blocks (no K&R)
csharp_new_line_before_open_brace = all:control
# Allow file-scoped namespaces (suggestion) to match existing codebase
csharp_style_namespace_declarations = file_scoped:suggestion

# Strengthen some rules for library surface
# Public API should have XML docs
# (Keep as warning to avoid breaking build immediately; can escalate later.)
dotnet_diagnostic.CS1591.severity = warning

# Avoid async void
dotnet_diagnostic.VSTHRD100.severity = warning

# Naming rules: methods PascalCase, no underscores
dotnet_naming_symbols.methods.applicable_kinds = method
dotnet_naming_symbols.methods.applicable_accessibilities = *
dotnet_naming_symbols.methods.required_modifiers = *

dotnet_naming_style.pascal_case.capitalization = pascal_case
dotnet_naming_style.no_underscores.capitalization = pascal_case

dotnet_naming_rule.methods_must_be_pascal_without_underscore.symbols = methods
dotnet_naming_rule.methods_must_be_pascal_without_underscore.style = no_underscores
dotnet_naming_rule.methods_must_be_pascal_without_underscore.severity = error

# Sort usings (System first)
dotnet_sort_system_directives_first = true

# Re-enable key StyleCop rules for strict pass (user asked to fix all remaining rules except SA1101)
dotnet_diagnostic.SA1615.severity = error
dotnet_diagnostic.SA1617.severity = error
dotnet_diagnostic.SA1642.severity = error
dotnet_diagnostic.SA1413.severity = error
dotnet_diagnostic.SA1649.severity = error
dotnet_diagnostic.IDE0005.severity = error
dotnet_diagnostic.SA1407.severity = error
dotnet_diagnostic.SA1107.severity = error
dotnet_diagnostic.SA1134.severity = error
dotnet_diagnostic.SA1514.severity = error
dotnet_diagnostic.SA1502.severity = error
dotnet_diagnostic.SA1201.severity = error
dotnet_diagnostic.SA1204.severity = error
dotnet_diagnostic.SA1119.severity = error
dotnet_diagnostic.SA1518.severity = error
dotnet_diagnostic.SA1128.severity = error
dotnet_diagnostic.SA1206.severity = error

# Disable SA1101 per user preference
dotnet_diagnostic.SA1101.severity = none

# Keep a few other rules as warnings to guide future cleanup
dotnet_diagnostic.SA1117.severity = warning

# Misc
csharp_style_var_for_built_in_types = true:silent
csharp_style_var_when_type_is_apparent = true:silent
csharp_style_var_elsewhere = true:suggestion
csharp_style_prefer_switch_expression = true:suggestion
csharp_style_prefer_pattern_matching = true:suggestion
csharp_style_expression_bodied_methods = when_on_single_line:suggestion
csharp_using_directive_placement = outside_namespace:suggestion
